{ "name": "Repeater",
  "memberOf": "$w",
  "mixes":
    [ "$w.Element",
      "$w.HiddenCollapsedMixin" ],
  "labels":
    [ "changed" ],
  "location":
    { "filename": "Repeater.es6",
      "lineno": 96 },
  "docs":
    { "summary": "A repeating layout.",
      "links": [],
      "examples": [] },
  "properties":
    [ { "name": "data",
        "labels":
          [ "changed" ],
        "get": true,
        "set": false,
        "type":
          { "name": "Array",
            "typeParams":
              [ "Object" ] },
        "locations":
          [ { "filename": "Repeater.es6",
              "lineno": 271 } ],
        "docs":
          { "summary": "Sets or gets the repeater data.",
            "description":
              [ "A repeater's data is stored as an array of objects. Each object in the array",
                " must contain a unique `_id` property which is used to match the object's",
                " data to the individual repeated items of the repeater as described below.",
                " The value of the `_id` property can only contain alphanumeric",
                " characters and hyphens (`-`). Other than `_id`, the objects in the",
                " repeater's data array can contain anything you want.",
                "",
                " For example, a simple array of repeater data may look like this:",
                " ```",
                " [",
                "   {",
                "     \"_id\": \"1\",",
                "     \"firstName\": \"John\",",
                "     \"lastName\": \"Doe\",",
                "     \"image\": \"http://someImageUrl/john.jpg\"",
                "   },",
                "   {",
                "     \"_id\": \"2\",",
                "     \"firstName\": \"Jane\",",
                "     \"lastName\": \"Doe\",",
                "     \"image\": \"http://someImageUrl/jane.jpg\"",
                "   }",
                " ]",
                " ```",
                "",
                " Repeater data is not automatically applied to the elements in the reapeated",
                " items. You choose how to use the repeater's data in the [`onItemReady()`](#onItemReady),",
                " [`onItemRemoved()`](#onItemRemoved), [`forItems()`](#forItems), and",
                " [`forEachItem()`](#forEachItem) callback functions. Most often, you",
                " apply the data of a repeated item to the properties and functions",
                " of the repeated elements contained in that repeated item.",
                "",
                " You cannot modify the data array in-place. To add, change, or remove",
                " objects from the repeater's data array:",
                "   1. Store the value of the `data` property in a variable.",
                "   1. Make changes to the objects of the shouldTriggerOnItemRemoved array.",
                "   1. Reset the `data` property with the modified array.",
                "",
                "",
                " When the repeater's `data` property is set:",
                "   1. New repeated items are created for each object that has an `_id` value",
                "      that is not already present in the current array of data objects. The elements",
                "      in the new items are first populated with the data of the repeater's",
                "      [item template](item-template). Then the [`onItemReady()`](#onItemReady)",
                "      event handler is triggered for each of the new items. Usually, you",
                "      overwrite some or all of the data populated from the item template",
                "      in the [`onItemReady()`](#onItemReady) event handler with the data for",
                "      that specific item. When all of the [`onItemReady()`](#onItemReady)",
                "      event handlers have finished running, the new items are displayed.",
                "   1. Repeated items are removed if their IDs are no longer in the array of",
                "      data objects. The [`onItemRemoved()`](#onItemRemoved) event handler is",
                "      triggered for each of the removed items.",
                "   1. Nothing occurs to repeated items whose IDs were already in the array",
                "      of data objects, even if other data in the object has changed. To update",
                "      repeated items with the new data, use the [`forEachItem()`](#forEachItem)",
                "      or [`forItems()`](#forItems) functions.",
                "",
                "",
                " Getting the `data` property returns the repeater's current data. If you",
                " have not yet explicitly set the repeater's `data`, getting the `data`",
                " property returns only the IDs of the current repeated items that were",
                " set in the Editor." ],
            "links": [],
            "examples":
              [ { "title": "Get a repeater's data",
                  "body":
                    [ "let repeaterData = $w(\"#myRepeater\").data;" ] },
                { "title": "Set a repeater's data",
                  "body":
                    [ "const bikeData = [",
                      "\t{",
                      "\t\t\"_id\":\"bike1\",",
                      "\t\t\"img\":\"wix:image://v1/6875c086ef453f5727c2b5932b3b3be4.png/Red Bike#originWidth=550&originHeight=300\",",
                      "\t\t\"kind\":\"Red Bike\"",
                      "\t},",
                      "\t{",
                      "\t\t\"_id\":\"bike2\",",
                      "\t\t\"img\":\"wix:image://v1/703b4af24578ada6f1e11725a468096e.png/Speed Bike#originWidth=550&originHeight=300\",",
                      "\t\t\"kind\":\"Black Bike\"",
                      "\t},",
                      "\t{",
                      "\t\t\"_id\":\"bike3\",",
                      "\t\t\"img\":\"wix:image://v1/2bb3219153c347daf475067d763be40d.png/Neon Bike#originWidth=550&originHeight=300\",",
                      "\t\t\"kind\":\"Green Bike\"",
                      "\t}",
                      "];",
                      "",
                      "$w(\"#myRepeater\").data = bikeData;" ] },
                { "title": "Set a repeater's data from a database query",
                  "body":
                    [ "import wixData from 'wix-data';",
                      "",
                      "$w.onReady(function () {",
                      "  $w(\"#myRepeater\").onItemReady( ($w, itemData, index) => {",
                      "    $w(\"#bookTitle\").text = itemData.title;",
                      "    $w(\"#bookSubtitle\").text = itemData.subtitle;",
                      "    $w(\"#bookCover\").src = itemData.pic;",
                      "  } );",
                      "",
                      "  wixData.query(\"Books\")",
                      "    .find()",
                      "    .then( (results) => {",
                      "      $w(\"#myRepeater\").data = results.items;",
                      "    } );",
                      "} );" ] },
                { "title": "Modify a repeater's data",
                  "body":
                    [ "// get current data array",
                      "let dataArray = $w(\"#myRepeater\").data;",
                      "",
                      "// change something in the data array",
                      "dataArray[0].somefield = \"New value\";",
                      "",
                      "// reset repeater data",
                      "$w(\"#myRepeater\").data = dataArray;" ] },
                { "title": "Set a repeater's data",
                  "body":
                    [ "// static repeater data",
                      "const bikeData = [",
                      "  {",
                      "    \"_id\":\"bike1\",",
                      "    \"img\":\"wix:image://v1/6875c086ef453f5727c2b5932b3b3be4.png/Red Bike#originWidth=550&originHeight=300\",",
                      "    \"description\":\"Red Bike\"",
                      "  },",
                      "  {",
                      "    \"_id\":\"bike2\",",
                      "    \"img\":\"wix:image://v1/703b4af24578ada6f1e11725a468096e.png/Speed Bike#originWidth=550&originHeight=300\",",
                      "    \"description\":\"Black Bike\"",
                      "  },",
                      "  {",
                      "    \"_id\":\"bike3\",",
                      "    \"img\":\"wix:image://v1/2bb3219153c347daf475067d763be40d.png/Neon Bike#originWidth=550&originHeight=300\",",
                      "    \"description\":\"Green Bike\"",
                      "  }",
                      "];",
                      "",
                      "$w.onReady(function () {",
                      "  // handle creation of new repeated items",
                      "  $w(\"#myRepeater\").onItemReady( ($w, itemData, index) => {",
                      "    $w(\"#image1\").src = itemData.img;",
                      "    $w(\"#text1\").text = itemData.description;",
                      "",
                      "    $w(\"#image1\").onClick( (event) => {",
                      "      let $item = $w.at(event.context);",
                      "      $item(\"#text1\").text = \"Selected\";",
                      "    } );",
                      "  } );",
                      "",
                      "  // set the repeater data, triggering the creation of new items",
                      "  $w(\"#myRepeater\").data = bikeData;",
                      "} );" ] },
                { "title": "Set a repeater's data and add new data on a button click",
                  "body":
                    [ "// static repeater data part 1",
                      "const bikeData1 = [",
                      "  {",
                      "    \"_id\":\"bike1\",",
                      "    \"img\":\"wix:image://v1/6875c086ef453f5727c2b5932b3b3be4.png/Red Bike#originWidth=550&originHeight=300\",",
                      "    \"description\":\"Red Bike\"",
                      "  },",
                      "  {",
                      "    \"_id\":\"bike2\",",
                      "    \"img\":\"wix:image://v1/703b4af24578ada6f1e11725a468096e.png/Speed Bike#originWidth=550&originHeight=300\",",
                      "    \"description\":\"Black Bike\"",
                      "  }",
                      "];",
                      "",
                      "// static repeater data part 2",
                      "const bikeData2 = [",
                      "  {",
                      "    \"_id\":\"bike3\",",
                      "    \"img\":\"wix:image://v1/2bb3219153c347daf475067d763be40d.png/Neon Bike#originWidth=550&originHeight=300\",",
                      "    \"description\":\"Green Bike\"",
                      "  }",
                      "];",
                      "",
                      "$w.onReady(function () {",
                      "  // handle creation of new repeated items",
                      "  $w(\"#myRepeater\").onItemReady( ($w, itemData, index) => {",
                      "    $w(\"#image1\").src = itemData.img;",
                      "    $w(\"#text1\").text = itemData.description;",
                      "",
                      "    $w(\"#image1\").onClick( (event) => {",
                      "      let $item = $w.at(event.context);",
                      "      $item(\"#text1\").text = \"Selected\";",
                      "    } );",
                      "  } );",
                      "",
                      "  // set the repeater data to be the first part of the static data,",
                      "  // triggering the creation of new items",
                      "  $w(\"#myRepeater\").data = bikeData1;",
                      "",
                      "  // add a handler for the \"add\" button that resets the repeater data",
                      "  // to be both parts of the static data, triggering the creation of",
                      "  // a new item",
                      "  $w(\"#addButton\").onClick( () => {",
                      "    let tempData = $w(\"#myRepeater\").data;",
                      "    $w(\"#myRepeater\").data = tempData.concat(bikeData2);",
                      "  } );",
                      "} );" ] },
                { "title": "Set the a repeater's data and remove some data on a button click",
                  "body":
                    [ "// static repeater data",
                      "const bikeData = [",
                      "  {",
                      "    \"_id\":\"bike1\",",
                      "    \"img\":\"wix:image://v1/6875c086ef453f5727c2b5932b3b3be4.png/Red Bike#originWidth=550&originHeight=300\",",
                      "    \"description\":\"Red Bike\"",
                      "  },",
                      "  {",
                      "    \"_id\":\"bike2\",",
                      "    \"img\":\"wix:image://v1/703b4af24578ada6f1e11725a468096e.png/Speed Bike#originWidth=550&originHeight=300\",",
                      "    \"description\":\"Black Bike\"",
                      "  },",
                      "  {",
                      "    \"_id\":\"bike3\",",
                      "    \"img\":\"wix:image://v1/2bb3219153c347daf475067d763be40d.png/Neon Bike#originWidth=550&originHeight=300\",",
                      "    \"description\":\"Green Bike\"",
                      "  }",
                      "];",
                      "",
                      "$w.onReady(function () {",
                      "  // handle creation of new repeated items",
                      "  $w(\"#myRepeater\").onItemReady( ($w, itemData, index) => {",
                      "    $w(\"#image1\").src = itemData.img;",
                      "    $w(\"#text1\").text = itemData.description;",
                      "",
                      "    $w(\"#image1\").onClick( (event) => {",
                      "      let $item = $w.at(event.context);",
                      "      $item(\"#text1\").text = \"Selected\";",
                      "    } );",
                      "  } );",
                      "",
                      "  // handle removal of new repeated items",
                      "  $w(\"#myRepeater\").onItemRemoved( (itemData) => {",
                      "    console.log(`Removed: ${JSON.stringify(itemData)}`);",
                      "  } );",
                      "",
                      "  // set the repeater data to be the first part of the static data,",
                      "  // triggering the creation of new items",
                      "  $w(\"#myRepeater\").data = bikeData;",
                      "",
                      "  // add a handler for the \"remove\" button that resets the repeater data",
                      "  // with the middle object removed, triggering the removal of the middle",
                      "  // repeated item",
                      "  $w(\"#removeButton\").onClick( () => {",
                      "    let tempData = $w(\"#myRepeater\").data;",
                      "    tempData.splice(1,1);",
                      "    $w(\"#myRepeater\").data = tempData;",
                      "  } );",
                      "} );" ] } ] },
        "extra":
          {  } } ],
  "operations":
    [ { "name": "forEachItem",
        "labels":
          [ "changed" ],
        "nameParams": [],
        "params":
          [ { "name": "callback",
              "type": "$w.ForItemCallback",
              "doc": "The name of the function or the function expression to run for each repeated item." } ],
        "ret":
          { "type": "void" },
        "locations":
          [ { "filename": "Repeater.es6",
              "lineno": 558 } ],
        "docs":
          { "summary": "Runs a function for each repeated item.",
            "description":
              [ "Use the `forEachItem()` function to run a function on all of a repeater's",
                " repeated items. You can use the callback function to update or pull",
                " information from all of the repeater's repeated items.",
                "",
                " When you set a repeater's [`data`](#data) property with data that changes",
                " items with existing IDs, those changes are not automatically reflected",
                " in the elements contained in the repeater. That is because you are",
                " responsible for applying a repeater's data to its repeated items.",
                "",
                " To apply the data to items with new IDs, you can use the [`onItemReady()`](#onItemReady)",
                " event handler.",
                "",
                " To update items with existing IDs, you can use the `forEachItem()` or",
                " [`forItems()`](#forItems) functions.",
                "",
                " Usually, when updating repeated items you:",
                " + Apply the repeated item's `itemData` to the elements contained in each",
                "   of the repeater's repeated items.",
                " + Add event handlers to the elements contained in each of the",
                "   repeater's repeated items." ],
            "links": [],
            "examples":
              [ { "title": "Loop through all of a repeater's repeated items",
                  "body":
                    [ "$w(\"#myRepeater\").forEachItem( ($w, itemData, index) => {",
                      "  let repeatedElement = $w(\"#repeatedElement\");",
                      "  let nonRepeatedElement = $w(\"#nonRepeatedElement\");",
                      "  let itemDataValue = itemData.someProperty;",
                      "  let isEvenItem = index % 2 == 0;",
                      "} );" ] },
                { "title": "Update data in all of a repeater's repeated items",
                  "body":
                    [ "$w(\"#myRepeater\").forEachItem( ($w, itemData, index) => {",
                      "  $w(\"#repeatedImage\").src = itemData.img;",
                      "  $w(\"#repeatedText\").text = itemData.description;",
                      "} );" ] },
                { "title": "Update data in all of a repeater's repeated items",
                  "body":
                    [ "$w.onReady(function () {",
                      "    $w(\"#myDataset\").onReady( () => {",
                      "      $w(\"#myRepeater\").forEachItem( ($w, itemData, index) => {",
                      "          if(itemData.boolField){",
                      "              $w(\"myText\").text = \"Yes Ma'am!\";",
                      "          }",
                      "          else {",
                      "              $w(\"#myText\").text = \"No way Jose!\";",
                      "          }",
                      "      } );",
                      "  } );",
                      "} );" ] } ] },
        "extra":
          {  } },
      { "name": "forItems",
        "labels":
          [ "changed" ],
        "nameParams": [],
        "params":
          [ { "name": "itemIds",
              "type":
                { "name": "Array",
                  "typeParams":
                    [ "string" ] },
              "doc": "The IDs of the items on which to run the callback function." },
            { "name": "callback",
              "type": "$w.ForItemCallback",
              "doc": "The name of the function or the function expression to run for each repeated item." } ],
        "ret":
          { "type": "void" },
        "locations":
          [ { "filename": "Repeater.es6",
              "lineno": 621 } ],
        "docs":
          { "summary": "Runs a function for each repeated item with the given IDs.",
            "description":
              [ "Use the `forItems()` function to run a function on a specified list of",
                " repeated items. You can use the callback function to update or pull",
                " information from the specified repeated items.",
                "",
                " When you set a repeater's [`data`](#data) property with data that changes",
                " items with existing IDs, those changes are not automatically reflected",
                " in the elements contained in the repeater. That is because you are",
                " responsible for applying a repeater's data to its repeated items.",
                "",
                " To apply the data to items with new IDs, you can use the [`onItemReady()`](#onItemReady)",
                " event handler.",
                "",
                " To update items with existing IDs, you can use the `forEachItem()` or",
                " [`forItems()`](#forItems) functions.",
                "",
                " Usually, when updating repeated items you:",
                " + Apply the repeated item's `itemData` to the elements contained in each",
                "   of the repeater's repeated items.",
                " + Add event handlers to the elements contained in each of the",
                "   repeater's repeated items." ],
            "links": [],
            "examples":
              [ { "title": "Loop through some of a repeater's repeated items",
                  "body":
                    [ "$w(\"#myRepeater\").forItems( [\"item1\", \"item4\"], ($w, itemData, index) => {",
                      "  let repeatedElement = $w(\"#repeatedElement\");",
                      "  let nonRepeatedElement = $w(\"#nonRepeatedElement\");",
                      "  let itemDataValue = itemData.someProperty;",
                      "  let isEvenItem = index % 2 == 0;",
                      "} ) ;" ] },
                { "title": "Update data in some of a repeater's repeated items",
                  "body":
                    [ "$w(\"#myRepeater\").forItems( [\"item1\", \"item4\"], ($w, itemData, index) => {",
                      "  $w(\"#repeatedImage\").src = itemData.img;",
                      "  $w(\"#repeatedText\").text = itemData.description;",
                      "} );" ] } ] },
        "extra":
          {  } },
      { "name": "onItemReady",
        "labels":
          [ "changed" ],
        "nameParams": [],
        "params":
          [ { "name": "handler",
              "type": "$w.ItemReadyEventHandler",
              "doc": "The name of the function or\n the function expression to run when the item is ready." } ],
        "ret":
          { "type": "$w.Repeater",
            "doc": "The element on which the event is now registered." },
        "locations":
          [ { "filename": "Repeater.es6",
              "lineno": 424 } ],
        "docs":
          { "summary": "Sets the function that runs when a new repeated item is created.",
            "description":
              [ "Use the `onItemReady()` function for code you want to run before new",
                " repeated items are rendered.",
                "",
                " The callback is triggered when you add new items by setting the",
                " [`data`](#data) property. It is not triggered for existing items that",
                " are updated when you set the [`data`](#data) property. To run code after",
                " updating existing items, use the [`forEachItem`](#forEachItem) or",
                " [`forItems`](#forItems) functions.",
                "",
                "",
                " Usually, you use `onItemReady()` to:",
                " + Apply the repeated item's `itemData` to the properties and functions",
                "   of the repeated elements contained in the repeated item being created.",
                " + Add event handlers to the repeated elements contained in",
                "   the repeated item being created." ],
            "links": [],
            "examples":
              [ { "title": "Set up new repeated items",
                  "body":
                    [ "$w(\"#myRepeater\").onItemReady( ($w, itemData, index) => {",
                      "  let repeatedElement = $w(\"#repeatedElement\");",
                      "  let nonRepeatedElement = $w(\"#nonRepeatedElement\");",
                      "  let itemDataValue = itemData.someProperty;",
                      "  let isEvenItem = index % 2 == 0;",
                      "});" ] },
                { "title": "Set up new repeated items",
                  "body":
                    [ "$w(\"#myRepeater\").onItemReady( ($w, itemData, index) => {",
                      "  const repeatedText = $w(\"#repeatedText\");",
                      "  const repeatedImage = $w(\"#repeatedImage\");",
                      "  const numSelected = $w(\"#nonRepeatedText\");",
                      "",
                      "  repeatedImage.src = itemData.img;",
                      "  repeatedText.text = itemData.description;",
                      "",
                      "  repeatedImage.onClick( (event) => {",
                      "    if(repeatedText.text === \"Selected\"){",
                      "      repeatedText.text = itemData.description;",
                      "      numSelected.text = (Number(numSelected.text) - 1).toString();",
                      "    }",
                      "    else {",
                      "      repeatedText.text = \"Selected\";",
                      "      numSelected.text = (Number(numSelected.text) + 1).toString();",
                      "    }",
                      "  } );",
                      "} );" ] } ] },
        "extra":
          { "notes":
              [ "When using a dataset to populate the contents of your repeated items,\n  the `onItemReady()` callback function is triggered before the dataset\n  populates the values of your page elements. Therefore, element values\n  that you set using `onItemReady()` may be overridden when the dataset is\n  ready. To change the values set by the dataset, use [`forEachItem`](#forEachItem)\n  inside the datset's [`onReady()`](wix-dataset.html#onReady). For more\n  information, see the [`forEachItem`](#forEachItem) examples." ],
            "eventType": "itemReady" } },
      { "name": "onItemRemoved",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "handler",
              "type": "$w.ItemRemovedEventHandler",
              "doc": "The name of the function or\n the function expression to run when the item is removed." } ],
        "ret":
          { "type": "$w.Repeater",
            "doc": "The element on which the event is now registered." },
        "locations":
          [ { "filename": "Repeater.es6",
              "lineno": 509 } ],
        "docs":
          { "summary": "Sets the function that runs when a repeated item is removed.",
            "description":
              [ "Use the `onItemRemoved()` function for code you want to run when",
                " repeated items are removed. The callback is triggered when you remove",
                " items by setting the value of the [`data`](#data) property to an array",
                " in which some of the existing item IDs are no longer present." ],
            "links": [],
            "examples":
              [ { "title": "Get data from items being removed",
                  "body":
                    [ "$w(\"#myRepeater\").onItemRemoved( (itemData) => {",
                      "  let itemDataValue = itemData.someProperty;",
                      "});" ] } ] },
        "extra":
          { "notes":
              [ "The `onItemRemoved()` callback function is not called when the static\n repeated items that were set in the Editor are removed." ],
            "eventType": "itemRemoved" } } ],
  "callbacks": [],
  "messages": [],
  "extra":
    {  } }