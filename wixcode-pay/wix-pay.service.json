{ "name": "wix-pay",
  "mixes": [],
  "labels":
    [ "new" ],
  "location":
    { "filename": "pay.js",
      "lineno": 95 },
  "docs":
    { "summary": "The wix-pay module contains functionality for working with\n payments from client-side code.",
      "description":
        [ "To use the Pay API, import `wixPay` from the `wix-pay` module:",
          "",
          "   ``` javascript",
          "   import wixPay from 'wix-pay';",
          "   ```" ],
      "links": [],
      "examples": [] },
  "properties": [],
  "operations":
    [ { "name": "startPayment",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "paymentId",
              "type": "string",
              "doc": "The payment ID from a `createPayment()` request." },
            { "name": "options",
              "type": "wix-pay.PaymentOptions",
              "doc": "Payment process options.",
              "optional": true } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "wix-pay.PaymentResult" ] },
            "doc": "on fulfilled - The created payment." },
        "locations":
          [ { "filename": "pay.js",
              "lineno": 183 } ],
        "docs":
          { "summary": "Starts a payment.",
            "description":
              [ "Before using the startPayment() function, you will need to set up your site to",
                " accept payments. To learn more, see [About Accepting Payments](https://support.wix.com/en/article/about-accepting-payments).",
                "",
                " The `startPayment()` function returns a Promise that resolves to a [`PaymentResult`](#PaymentResult)",
                " object when the user completes the payment process.",
                "",
                " Starting a payment prompts the user to select a payment method and continue the",
                " payment process with the options specified in the `options` parameter.",
                "",
                " Before calling `startPayment()`, call [`createPayment()`](wix-pay-backend.html#createPayment)",
                " from your site's backend to create a payment and generate a value for the `paymentId` parameter.",
                "",
                " Use the `options` parameter to:",
                " + Determine whether a thank you page is shown at the end of the process.",
                " + Determine whether a terms and conditions affirmation checkbox and link are shown.",
                " + Send additional customer information with the payment." ],
            "links": [],
            "examples":
              [ { "title": "Start a payment on button click",
                  "body":
                    [ "/**************************",
                      " * backend code - pay.jsw *",
                      " **************************/",
                      "",
                      "import wixPay from 'wix-pay-backend';",
                      "",
                      "export function createMyPayment() {",
                      "  return wixPay.createPayment({",
                      "    items: [{",
                      "      name: \"Product Name\",",
                      "      price: 9.99",
                      "    }],",
                      "    amount: 9.99",
                      "  });",
                      "}",
                      "",
                      "/********************",
                      " * client-side code *",
                      " ********************/",
                      "",
                      "import {createMyPayment} from 'backend/pay';",
                      "import wixPay from 'wix-pay';",
                      "",
                      "export function myButton_click(event, $w) {",
                      "  createMyPayment()",
                      "    .then( (payment) => {",
                      "      wixPay.startPayment(payment.id);",
                      "    } );",
                      "}" ] },
                { "title": "Start a payment on button click and handle status possibilities",
                  "body":
                    [ "/**************************",
                      " * backend code - pay.jsw *",
                      " **************************/",
                      "",
                      "import wixPay from 'wix-pay-backend';",
                      "",
                      "export function createMyPayment() {",
                      "  return wixPay.createPayment( {",
                      "    items: [ {",
                      "      name: \"Product Name\",",
                      "      price: 9.99",
                      "    } ],",
                      "    amount: 9.99",
                      "  } );",
                      "}",
                      "",
                      "/********************",
                      " * client-side code *",
                      " ********************/",
                      "",
                      "import {createMyPayment} from 'backend/pay';",
                      "import wixPay from 'wix-pay';",
                      "",
                      "export function myButton_click(event, $w) {",
                      "  createMyPayment()",
                      "    .then( (payment) => {",
                      "      wixPay.startPayment(payment.id)",
                      "        .then( (result) => {",
                      "          if (result.status === \"Successful\") {",
                      "            // handle payment success",
                      "          } else if (result.status === \"Failed\") {",
                      "            // handle payment failure",
                      "          } else if (result.status === \"Pending\") {",
                      "            // handle payment pending",
                      "          } else if (result.status === \"Cancelled\") {",
                      "            // handle user closing payment panel",
                      "          }",
                      "        } );",
                      "    } );",
                      "}" ] },
                { "title": "Start a payment on button click with a custom thank you page",
                  "body":
                    [ "/**************************",
                      " * backend code - pay.jsw *",
                      " **************************/",
                      "",
                      "import wixPay from 'wix-pay-backend';",
                      "",
                      "export function createMyPayment() {",
                      "  return wixPay.createPayment({",
                      "    items: [ {",
                      "      name: \"Product Name\",",
                      "      price: 9.99",
                      "    } ],",
                      "    amount: 9.99",
                      "  } );",
                      "}",
                      "",
                      "/********************",
                      " * client-side code *",
                      " ********************/",
                      "",
                      "import {createMyPayment} from 'backend/pay';",
                      "import wixPay from 'wix-pay';",
                      "import wixWindow from 'wix-window';",
                      "",
                      "export function myButton_click(event, $w) {",
                      "  createMyPayment()",
                      "    .then( (payment) => {",
                      "      wixPay.startPayment(payment.id, {\"showThankYouPage\": false})",
                      "        .then( (result) => {",
                      "          if (result.status === \"Successful\") {",
                      "            wixWindow.openLightbox(\"Success Box\");",
                      "          } else if (result.status === \"Pending\") {",
                      "            wixWindow.openLightbox(\"Pending Box\");",
                      "          }",
                      "      } );",
                      "    } );",
                      "}" ] },
                { "title": "Start a payment on button click with a terms and conditions link",
                  "body":
                    [ "/**************************",
                      " * backend code - pay.jsw *",
                      " **************************/",
                      "",
                      "import wixPay from 'wix-pay-backend';",
                      "",
                      "export function createMyPayment() {",
                      "  return wixPay.createPayment({",
                      "    items: [{",
                      "      name: \"Product Name\",",
                      "      price: 9.99",
                      "    }],",
                      "    amount: 9.99",
                      "  });",
                      "}",
                      "",
                      "/********************",
                      " * client-side code *",
                      " ********************/",
                      "",
                      "import {createMyPayment} from 'backend/pay';",
                      "import wixPay from 'wix-pay';",
                      "",
                      "export function myButton_click(event, $w) {",
                      "  createMyPayment()",
                      "    .then( (payment) => {",
                      "      wixPay.startPayment(payment.id, {",
                      "        \"termsAndConditionsLink\": \"https://mysite.com/terms\"",
                      "      } );",
                      "  } );",
                      "}" ] },
                { "title": "Start a payment on button click using collection data",
                  "body":
                    [ "/**************************",
                      " * backend code - pay.jsw *",
                      " **************************/",
                      "",
                      "import wixData from 'wix-data';",
                      "import wixPay from 'wix-pay-backend';",
                      "",
                      "export async function createMyPayment(productId) {",
                      "  return wixData.get(\"productCollection\", productId)",
                      "    .then( (product) => {",
                      "      return wixPay.createPayment( {",
                      "        items: [{",
                      "          name: product.name,",
                      "          price: product.price",
                      "        }],",
                      "        amount: product.price",
                      "      } );",
                      "    } );",
                      "}",
                      "",
                      "/********************",
                      " * client-side code *",
                      " ********************/",
                      "",
                      "import {createMyPayment} from 'backend/pay';",
                      "import wixPay from 'wix-pay';",
                      "",
                      "export function myButton_click(event, $w) {",
                      "  createMyPayment(event.context.itemId)",
                      "    .then( (payment) => {",
                      "      wixPay.startPayment(payment.id);",
                      "    } );",
                      "}" ] } ] },
        "extra":
          { "notes":
              [ "The backend [`createPayment()`](wix-pay-backend.html#createPayment) function\n takes a `PaymentRequest` parameter that defines the information for a payment.\n For security reasons you should always create the `PaymentRequest` object\n in backend code. Do not pass payment information from client-side code.\n Doing so opens a vulnerability that a malicious user can exploit to change\n payment information, such as the price of an item being purchased.\n To learn more about how to keep your payment code secure, see\n <a href=\"https://support.wix.com/en/article/security-considerations-when-working-with-wix-code#code-visibility\" target=\"_blank\">Security Considerations When Working with Wix Code</a>." ] } } ],
  "callbacks": [],
  "messages":
    [ { "name": "Payment",
        "locations":
          [ { "filename": "pay.js",
              "lineno": 149 } ],
        "docs":
          { "summary": "An object representing a payment.",
            "links":
              [ "[startPayment( )](#startPayment)",
                "[PaymentResult](#PaymentResult)" ],
            "examples": [] },
        "members":
          [ { "name": "id",
              "type": "string",
              "doc": "Payment transaction ID." },
            { "name": "amount",
              "type": "number",
              "doc": "Payment total amount." },
            { "name": "currency",
              "type": "string",
              "doc": "Payment currency. A three-letter\n [ISO-4217](https://en.wikipedia.org/wiki/ISO_4217) currency code." },
            { "name": "items",
              "type":
                { "name": "Array",
                  "typeParams":
                    [ "wix-pay.PaymentItem" ] },
              "doc": "Payment items." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "PaymentItem",
        "locations":
          [ { "filename": "pay.js",
              "lineno": 162 } ],
        "docs":
          { "summary": "An object representing a payment item.",
            "links":
              [ "[startPayment( )](#startPayment)" ],
            "examples": [] },
        "members":
          [ { "name": "name",
              "type": "string",
              "doc": "Payment item name." },
            { "name": "quantity",
              "type": "number",
              "doc": "Payment item quantity." },
            { "name": "price",
              "type": "number",
              "doc": "Payment item price." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "PaymentOptions",
        "locations":
          [ { "filename": "pay.js",
              "lineno": 172 } ],
        "docs":
          { "summary": "An object representing the options of a payment.",
            "links":
              [ "[startPayment( )](#startPayment)" ],
            "examples": [] },
        "members":
          [ { "name": "termsAndConditionsLink",
              "type": "string",
              "doc": "Absolute URL of a terms and conditions\n page. If a link is present, an agreement checkbox will be presented alongside the link.",
              "optional": true },
            { "name": "showThankYouPage",
              "type": "boolean",
              "doc": "Whether or not to show a thank you page. Defaults to `true`.",
              "optional": true },
            { "name": "customerInfo",
              "type": "string",
              "doc": "Information about the customer.",
              "optional": true } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "PaymentResult",
        "locations":
          [ { "filename": "pay.js",
              "lineno": 110 } ],
        "docs":
          { "summary": "An object representing a payment result.",
            "links":
              [ "[startPayment( )](#startPayment)" ],
            "examples": [] },
        "members":
          [ { "name": "payment",
              "type": "wix-pay.Payment",
              "doc": "The payment." },
            { "name": "status",
              "type": "wix-pay.PaymentStatus",
              "doc": "Payment status." },
            { "name": "transactionId",
              "type": "string",
              "doc": "ID of the payment transaction." },
            { "name": "userInfo",
              "type": "wix-pay.PaymentUserInfo",
              "doc": "User information." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "PaymentStatus",
        "locations":
          [ { "filename": "pay.js",
              "lineno": 121 } ],
        "docs":
          { "summary": "An string. One of \"`Successful`\",\n\"`Pending`\", \"`Failed`\", \"`ChargeBacked`\", \"`Refunded`\", \"`Offline`\", \"`PartiallyRefunded`\", \"`Cancelled`\", \"`Undefined`\"",
            "links":
              [ "[startPayment( )](#startPayment)" ],
            "examples": [] },
        "members": [],
        "extra":
          {  },
        "labels": [] },
      { "name": "PaymentUserInfo",
        "locations":
          [ { "filename": "pay.js",
              "lineno": 129 } ],
        "docs":
          { "summary": "An object representing the user information entered in the payment\n dialog.",
            "links":
              [ "[startPayment( )](#startPayment)",
                "[PaymentResult](#PaymentResult)" ],
            "examples": [] },
        "members":
          [ { "name": "firstName",
              "type": "string",
              "doc": "User's first name. Value is `null` if\n there is no first name information." },
            { "name": "lastName",
              "type": "string",
              "doc": "User's last name. Value is `null` if\n there is no last name information." },
            { "name": "country",
              "type": "string",
              "doc": "User's country. A three-letter\n [ISO-3166-1](https://en.wikipedia.org/wiki/ISO_3166-1) country code. Value\n is `null` if there is no country information." },
            { "name": "phone",
              "type": "string",
              "doc": "User's phone number. Value is `null` if\n there is no phone number information." },
            { "name": "email",
              "type": "string",
              "doc": "User's email address. Value is `null` if\n there is no email address information." } ],
        "extra":
          {  },
        "labels": [] } ],
  "extra":
    {  } }